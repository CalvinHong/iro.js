/*!
 * iro.js v3.5.1
 * 2016-2018 James Daniel
 * Released under the MIT License
 * github.com/jaames/iro.js
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.iro=e()}(this,function(){"use strict";var t="readystatechange",e="complete";function r(t,e,r,s){void 0===s&&(s={});for(var i=0;i<e.length;i++)t.addEventListener(e[i],r,s)}function s(t,e,r){for(var s=0;s<e.length;s++)t.removeEventListener(e[s],r)}var i=function(t,e){this.parent=t,this.root=t.svg.svg(e),r(this.root.el,["mousedown","touchstart"],this,{passive:!1})};i.prototype.handleEvent=function(t){var e=this.parent,i=this.root;t.preventDefault();var n,o=t.touches?t.changedTouches[0]:t,a=o.clientX,h=o.clientY,c=i.el.getBoundingClientRect();switch(t.type){case"mousedown":case"touchstart":r(document,["mousemove","touchmove","mouseup","touchend"],this,{passive:!1}),n=this.input(a,h,c,"START"),e.emit("input:start",e.color);break;case"mousemove":case"touchmove":n=this.input(a,h,c,"MOVE");break;case"mouseup":case"touchend":n=this.input(a,h,c,"END"),e.emit("input:end",e.color),s(document,["mousemove","touchmove","mouseup","touchend"],this)}n&&(e.color.hsv=n)},i.prototype.input=function(t,e,r,s){};var n=function(t,e){var r=t.svg({class:"iro__marker"});r.circle(0,0,e.r,{class:"iro__marker__outer",fill:"none",strokeWidth:5,stroke:"#000","vector-effect":"non-scaling-stroke"}),r.circle(0,0,e.r,{class:"iro__marker__inner",fill:"none",strokeWidth:2,stroke:"#fff","vector-effect":"non-scaling-stroke"}),this.g=r};n.prototype.move=function(t,e){this.g.setAttrs({x:t,y:e})};var o="iro__wheel",a=Math.PI,h=Math.sqrt,c=Math.round,l=function(t){function e(e,r){t.call(this,e,{class:o,x:r.x,y:r.y}),this._opts=r,this.type="wheel";var s=r.r,i=r.border,a=i.w,h=a+s,c=a+s,l=this.root;this.cX=c,this.cY=h,l.circle(c,h,s+i.w/2,{class:o+"__border",fill:"#fff",stroke:i.color,strokeWidth:i.w,"vector-effect":"non-scaling-stroke"});for(var u=l.g({class:o+"__hue",strokeWidth:s,fill:"none"}),p=0;p<360;p++)u.arc(c,h,s/2,p,p+1.5,{stroke:"hsl("+(r.anticlockwise?360-p:p)+",100%,50%)"});l.circle(c,h,s,{class:o+"__saturation"}).setGradient("fill",e.svg.gradient("radial",{0:{color:"#fff"},100:{color:"#fff",opacity:0}})),this._lightness=l.circle(c,h,s,{class:o+"__lightness",opacity:0}),this.marker=new n(l,r.marker)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e){var r=this._opts,s=t.hsv;if(e.v&&r.lightness&&this._lightness.setAttrs({opacity:(1-s.v/100).toFixed(2)}),e.h||e.s){var i=(r.anticlockwise?360-s.h:s.h)*(a/180),n=s.s/100*r.rMax;this.marker.move(this.cX+n*Math.cos(i),this.cY+n*Math.sin(i))}},e.prototype.input=function(t,e,r,s){var i=this._opts,n=i.rMax,o=r.width/2,l=r.height/2;console.log(r),t=o-(t-r.left),e=l-(e-r.top);var u=Math.atan2(e,t),p=c(u*(180/a))+180,f=Math.min(h(t*t+e*e),n);return{h:p=i.anticlockwise?360-p:p,s:c(100/n*f)}},e}(i),u=Math.round,p=Math.floor;function f(t,e){var r=t.match(/(\S+)\((\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)?([0-9\.]+?)?\)/i),s=parseInt(r[2]),i=parseInt(r[4]),n=parseInt(r[6]);return[r[1],"%"==r[3]?s/100*e[0]:s,"%"==r[5]?i/100*e[1]:i,"%"==r[7]?n/100*e[2]:n,parseFloat(r[8])||void 0]}function v(t){return t instanceof y?t:new y(t)}function g(t,e,r){return t<=e?e:t>=r?r:t}function d(t,e){var r={};for(var s in t)r[s]=e[s]!=t[s];return r}var y=function(t){this._onChange=!1,this._value={h:void 0,s:void 0,v:void 0},t&&this.set(t)},b={hsv:{configurable:!0},rgb:{configurable:!0},hsl:{configurable:!0},rgbString:{configurable:!0},hexString:{configurable:!0},hslString:{configurable:!0}};y.mix=function(t,e,r){var s=v(t).rgb,i=v(e).rgb;return r=g(r/100||.5,0,1),new y({r:p(s.r+(i.r-s.r)*r),g:p(s.g+(i.g-s.g)*r),b:p(s.b+(i.b-s.b)*r)})},y.lighten=function(t,e){var r=v(t),s=r.hsv;return s.v=g(s.v+e,0,100),r.hsv=s,r},y.darken=function(t,e){var r=v(t),s=r.hsv;return s.v=g(s.v-e,0,100),r.hsv=s,r},y.hsv2Rgb=function(t){var e,r,s,i,n,o,a,h,c=t.h/360,l=t.s/100,f=t.v/100;switch(o=f*(1-l),a=f*(1-(n=6*c-(i=p(6*c)))*l),h=f*(1-(1-n)*l),i%6){case 0:e=f,r=h,s=o;break;case 1:e=a,r=f,s=o;break;case 2:e=o,r=f,s=h;break;case 3:e=o,r=a,s=f;break;case 4:e=h,r=o,s=f;break;case 5:e=f,r=o,s=a}return{r:u(255*e),g:u(255*r),b:u(255*s)}},y.rgb2Hsv=function(t){var e,r=t.r/255,s=t.g/255,i=t.b/255,n=Math.max(r,s,i),o=Math.min(r,s,i),a=n-o;switch(n){case o:e=0;break;case r:e=(s-i)/a+(s<i?6:0);break;case s:e=(i-r)/a+2;break;case i:e=(r-s)/a+4}return{h:360*(e/=6),s:0==n?0:a/n*100,v:100*n}},y.hsv2Hsl=function(t){var e=t.s/100,r=t.v/100,s=.5*r*(2-e);return e=r*e/(1-Math.abs(2*s-1)),{h:t.h,s:100*e||0,l:100*s}},y.hsl2Hsv=function(t){var e=t.s/100,r=t.l/100;return e*=(r*=2)<=1?r:2-r,{h:t.h,s:2*e/(r+e)*100,v:(r+e)/2*100}},y.hsl2Str=function(t){return"hsl"+(t.a?"a":"")+"("+t.h+", "+t.s+"%, "+t.l+"%"+(t.a?", "+t.a:"")+")"},y.rgb2Str=function(t){return"rgb"+(t.a?"a":"")+"("+t.r+", "+t.g+", "+t.b+(t.a?", "+t.a:"")+")"},y.rgb2Hex=function(t){var e="#";return e+=t.r.toString(16).padStart(2,"0"),e+=t.g.toString(16).padStart(2,"0"),e+=t.b.toString(16).padStart(2,"0")},y.parseHexStr=function(t){t=t.replace("#","");var e=parseInt("0x"+t),r=3==t.length,s=r?15:255,i=r?4:8,n=r?17:1;return{r:(e>>2*i&s)*n,g:(e>>i&s)*n,b:(e&s)*n}},y.parseHslStr=function(t){var e=f(t,[360,100,100]);return{h:e[2],s:e[3],l:e[4]}},y.parseRgbStr=function(t){var e=f(t,[255,255,255]);return{r:e[1],g:e[2],b:e[3]}},b.hsv.get=function(){var t=this._value;return{h:t.h,s:t.s,v:t.v}},b.hsv.set=function(t){if(this._onChange){var e=this._value;for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r]);var s=d(e,t);this._value=t,(s.h||s.s||s.v)&&this._onChange(this,s)}else this._value=t},b.rgb.get=function(){var t=y.hsv2Rgb(this._value);return{r:u(t.r),g:u(t.g),b:u(t.b)}},b.rgb.set=function(t){this.hsv=y.rgb2Hsv(t)},b.hsl.get=function(){var t=y.hsv2Hsl(this._value);return{h:u(t.h),s:u(t.s),l:u(t.l)}},b.hsl.set=function(t){this.hsv=y.hsl2Hsv(t)},b.rgbString.get=function(){return y.rgb2Str(this.rgb)},b.rgbString.set=function(t){this.rgb=y.parseRgbStr(t)},b.hexString.get=function(){return y.rgb2Hex(this.rgb)},b.hexString.set=function(t){this.rgb=y.parseHexStr(t)},b.hslString.get=function(){return y.hsl2Str(this.hsl)},b.hslString.set=function(t){this.hsl=y.parseHslStr(t)},y.prototype.set=function(t){"object"==typeof t?t instanceof y?this.hsv=y.hsv:"r"in t?this.rgb=t:"v"in t?this.hsv=t:"l"in t&&(this.hsl=t):"string"==typeof t&&(/^rgb/.test(t)?this.rgbString=t:/^hsl/.test(t)?this.hslString=t:/^#[0-9A-Fa-f]/.test(t)&&(this.hexString=t))},y.prototype.setChannel=function(t,e,r){var s=this[t];s[e]=r,this[t]=s},y.prototype.clone=function(){return new y(this)},y.prototype.compare=function(t,e){return d(this[e=e||"hsv"],v(t)[e])},y.prototype.mix=function(t,e){this.hsv=mix(this,t,e).hsv},y.prototype.lighten=function(t){lighten(this,t)},y.prototype.darken=function(t){darken(this,t)},Object.defineProperties(y.prototype,b);var _="iro__slider",m=function(t){function e(e,r){t.call(this,e,{class:_,x:r.x,y:r.y});var s=r.r,i=r.w,o=r.h,a=r.border.w,h=this.root;r.range={min:s,max:i-s,w:i-2*s},r.sliderType=r.sliderType||"v",this.type="slider",this._opts=r;var c=s+a/2,l=h.insert("rect",{class:_+"__value",rx:c,ry:c,x:-a/2,y:-a/2,width:i+a,height:o+a,strokeWidth:a,stroke:r.border.color,"vector-effect":"non-scaling-stroke"});l.setGradient("fill",e.svg.gradient("linear",{0:{color:"#000"},100:{color:"#fff"}})),this._gradient=l.gradient,this.marker=new n(h,r.marker)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e){var r=this._opts,s=r.range,i=t.hsv,n=y.hsv2Hsl({h:i.h,s:i.s,v:100});if("v"==r.sliderType&&((e.h||e.s)&&this._gradient.stops[1].setAttrs({stopColor:"hsl("+n.h+","+n.s+"%,"+n.l+"%)"}),e.v)){var o=i.v/100;this.marker.move(s.min+o*s.w,r.h/2)}},e.prototype.input=function(t,e,r,s){t-=r.left,r.top;var i=this._opts.range,n=Math.max(Math.min(t,i.max),i.min)-i.min;return{v:Math.round(100/i.w*n)}},e}(i),w=0,k={class:"class",stroke:"stroke",strokeWidth:"stroke-width",fill:"fill",opacity:"opacity",offset:"offset",stopColor:"stop-color",stopOpacity:"stop-opacity"},x=window.navigator.userAgent.toLowerCase(),S=(/msie|trident|edge/.test(x),/^((?!chrome|android).)*safari/i.test(x)),M=function(t,e,r,s){var i=document.createElementNS("http://www.w3.org/2000/svg",r);this.el=i,this.setAttrs(s),(e.el||e).appendChild(i),this._root=t};M.prototype.insert=function(t,e){return new M(this._root,this,t,e)},M.prototype.g=function(t){return this.insert("g",t)},M.prototype.svg=function(t){return this.insert("svg",Object.assign({},t,{overflow:"visible"}))},M.prototype.arc=function(t,e,r,s,i,n){var o=i-s<=180?0:1;s*=Math.PI/180,i*=Math.PI/180;var a=t+r*Math.cos(i),h=e+r*Math.sin(i),c=t+r*Math.cos(s),l=e+r*Math.sin(s);return(n=n||{}).d=["M",a,h,"A",r,r,0,o,0,c,l].join(" "),this.insert("path",n)},M.prototype.circle=function(t,e,r,s){return(s=s||{}).cx=t,s.cy=e,s.r=r,this.insert("circle",s)},M.prototype.setAttrs=function(t){for(var e in t){var r=e in k?k[e]:e;this.el.setAttribute(r,t[e])}},M.prototype.setGradient=function(t,e){var r={};r[t]=e.getUrl(),e._refs[t]=this,this.gradient=e,this.setAttrs(r)};var C=function(t,e,r){var s=[],i=t._defs.insert(e+"Gradient",{id:"iroGradient"+w++});for(var n in r){var o=r[n];s.push(i.insert("stop",{offset:n+"%",stopColor:o.color,stopOpacity:void 0===o.opacity?1:o.opacity}))}this.el=i.el,this.stops=s,this._refs={}};C.prototype.getUrl=function(t){return"url("+(S?t||window.location.href:"")+"#"+this.el.id+")"};var A=function(t){function e(e,r,s,i){t.call(this,null,e,"svg",{width:r,height:s,viewBox:"0 0 "+r+" "+s,style:"display:"+(i||"block")+"; touch-action:none;"}),this._root=this,this._defs=this.insert("defs"),this._gradients=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.gradient=function(t,e){var r=new C(this,t,e);return this._gradients.push(r),r},e.prototype.updateUrls=function(t){if(S)for(var e=this._gradients,r=0;r<e.length;r++)for(var s in e[r]._refs){var i={};i[s]=e[r].getUrl(t),e[r]._refs[s].setAttrs(i)}},e}(M),H=function(){var t=document.createElement("style");document.head.appendChild(t),t.appendChild(document.createTextNode("")),this.style=t;var e=t.sheet;this.sheet=e,this.rules=e.rules||e.cssRules,this.map={}},R={enabled:{configurable:!0},cssText:{configurable:!0},css:{configurable:!0}};R.enabled.get=function(){return!this.sheet.disabled},R.enabled.set=function(t){this.sheet.disabled=!t},R.cssText.get=function(){var t=this.map,e=[];for(var r in t)e.push(r.replace(/,\W/g,",\n")+" {\n\t"+t[r].cssText.replace(/;\W/g,";\n\t")+"\n}");return e.join("\n")},R.css.get=function(){var t=this.map,e={};for(var r in t){var s=t[r];e[r]={};for(var i=0;i<s.length;i++){var n=s[i];e[r][n]=s.getPropertyValue(n)}}return e},H.prototype.setRule=function(t,e,r){var s=this.sheet,i=s.rules||s.cssRules,n=this.map;if(e=e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()}),n.hasOwnProperty(t))n[t].setProperty(e,r);else{var o=i.length,a=e+": "+r;try{s.insertRule(t+" {"+a+";}",o)}catch(e){s.addRule(t,a,o)}finally{i=s.rules||s.cssRules,n[t]=i[o].style}}},Object.defineProperties(H.prototype,R);var O=function(i,n){var o,a=this;n=n||{},this._events={},this._mouseTarget=!1,this._colorChangeActive=!1,this.css=n.css||n.styles||void 0,o=function(){a._mount(i,n)},document.readyState==e?o():r(document,[t],function r(i){document.readyState==e&&(o(),s(document,[t],r))})};return O.prototype._mount=function(t,e){var r=this;t="string"==typeof t?document.querySelector(t):t;var s=e.width||parseInt(t.width)||320,i=e.height||parseInt(t.height)||320,n=e.padding+2||6,o=e.borderWidth||0,a=e.markerRadius||8,h=e.sliderMargin||24,c=e.sliderHeight||2*a+2*n+2*o,u=Math.min(i-c-h,s),p=u/2-o,f=(s-u)/2,v={r:a},g={w:o,color:e.borderColor||"#fff"};this.el=t,this.svg=new A(t,s,i,e.display),this.ui=[new l(this,{x:f,y:0,r:p,padding:n,marker:v,border:g,lightness:void 0==e.wheelLightness||e.wheelLightness,anticlockwise:e.anticlockwise}),new m(this,{sliderType:"v",x:f+o,y:u+h,w:u-2*o,h:c-2*o,r:c/2-o,padding:n,marker:v,border:g})],this.stylesheet=new H,this.color=new y,this.color._onChange=this._update.bind(this),this.color.set(e.color||e.defaultValue||"#fff"),this.on("history:stateChange",function(t){r.svg.updateUrls(t)}),this.emit("mount",this)},O.prototype._update=function(t,e){for(var r=t.rgbString,s=this.css,i=0;i<this.ui.length;i++)this.ui[i].update(t,e);for(var n in s){var o=s[n];for(var a in o)this.stylesheet.setRule(n,a,r)}this._colorChangeActive||(this._colorChangeActive=!0,this.emit("color:change",t,e),this._colorChangeActive=!1)},O.prototype.on=function(t,e){var r=this._events;(r[t]||(r[t]=[])).push(e)},O.prototype.off=function(t,e){var r=this._events[t];r&&r.splice(r.indexOf(e),1)},O.prototype.emit=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var s=this._events,i=(s[t]||[]).concat(s["*"]||[]),n=0;n<i.length;n++)i[n].apply(null,e)},{Color:y,ColorPicker:O,Stylesheet:H,version:"3.5.1"}});
//# sourceMappingURL=iro.min.js.map
